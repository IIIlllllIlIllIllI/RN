Übungsblatt 04
U 4.1 
Post Office Protocol 3 
Machen Sie sich mit dem POP3-Protokoll vertraut. Verwenden Sie dabei das RFC 1939 und untersuchen Sie wie man sich bei einem Mailserver anmeldet und wie man Nachrichten abruft. Beantworten Sie folgende Fragen: 
1.	Wie ist das POP3-Protokoll grundsätzlich aufgebaut?  
Das POP3-Protokoll ist in allen verbreiteten E-Mail-Programmen integriert.
Damit der Mailserver Anfragen per POP3 beantworten kann, muss eine entsprechende POP3-Server-Software installiert sein.
Standardkommandos (auf jedem Server vorhanden):
USER xxx
wählt den Benutzernamen bzw. das Benutzerkonto auf dem E-Mail-Server.
PASS xxx
übergibt das Passwort in Klartext.
STAT
liefert den Status der Mailbox, u. a. die Anzahl aller E-Mails im Postfach und deren Gesamtgröße (in Byte).
LIST (n)
liefert die Anzahl und die Größe der (n-ten) E-Mail(s).
RETR n
holt die n-te E-Mail vom E-Mail-Server.
DELE n
löscht die n-te E-Mail am E-Mail-Server.
NOOP
keine Funktion, der Server antwortet mit +OK.
RSET
setzt alle DELE-Kommandos zurück.
QUIT
beendet die aktuelle POP3-Sitzung und führt alle DELE-Kommandos durch.
Optionale Kommandos (serverabhängig):
APOP
sichere Anmeldung, s.u.
TOP n x
ruft den Header und die ersten x Zeilen der n-ten Mail ab.
UIDL n
zeigt die eindeutige ID der E-Mail an.



Vorteil	Nachteil
•	Es ist keine ständige Verbindung zum Mailserver notwendig
•	Die Verbindung wird bei Bedarf vom Client aufgebaut und beendet
•	Nach der Anmeldung werden alle E-Mails vom Mailserver heruntergeladen	•	Eine Synchronisierung zwischen den Clients findet nicht statt. Wird eine Mail gelöscht oder als "Gelesen" markiert, wird diese Information nicht auf andere Mail-Clients übertragen.

2.	Ist POP3 ein sicheres Protokoll? Argumentieren Sie warum bzw. warum nicht.  
Wie auch SMTP ist POP3 recht simpel. Es setzt die Authentifizierung des Benutzers über Benutzernamen und Passwort voraus. Nutzername und Passwort werden ungeschützt als Klartext übertragen. Das ermöglicht Angreifern den unbemerkten Zugriff auf die Mailbox und ist eine eklatante Sicherheitslücke. Um die Authentifizierung abzusichern, gibt es diverse Erweiterungen. 


3.	Was ist der Unterschied zwischen single-line und multi-line response? Vergleichen Sie POP3 mit IMAP! Beschreiben Sie die wesentlichen Unterschiede.  
Antworten im POP3 bestehen aus einem Statusindikator und einem Schlüsselwort möglicherweise gefolgt von zusätzlichen Informationen. Alle Antworten sind durch ein CRLF-Paar beendet. Antworten können bis zu 512 Zeichen lang sein lang, einschließlich der abschließenden CRLF. Es gibt derzeit zwei Status Indikatoren: positiv ("+ OK") und negativ ("-ERR"). Server müssen sende das "+ OK" und "-ERR" in Großbuchstaben.

Single-line:  Alle Befehlsantworten beginnen mit einer Statuszeile. Die Statuszeile besteht aus einer Statusanzeige und einem Schlüsselwort, möglicherweise gefolgt von zusätzlichen Informationen. Derzeit gibt es zwei Statusanzeigen: positiv ("+ OK") und negativ ("-ERR"). Einzeilige Befehlsergebnisse werden im Allgemeinen als zusätzliche Informationen bereitgestellt, die der Statusanzeige folgen.
Multi - line
Antworten auf bestimmte Befehle sind mehrzeilig. In diesen Fällen, die werden unten deutlich angezeigt, nach dem Senden der ersten Zeile der Antwort und eine CRLF, werden zusätzliche Zeilen gesendet, jeweils beendet durch ein CRLF-Paar. Wenn alle Zeilen der Antwort gesendet wurden, Endzeile wird gesendet, bestehend aus einem Abschlussoktett (Dezimalcode  046, ".") Und ein CRLF-Paar. Wenn eine Zeile der Mehrzeilenantwort beginnt mit dem Abschlussoktett, die Zeile ist "byte-stuffed" von Das Beendigungsoktett wird an diese Zeile der Antwort weitergeleitet. Daher wird eine mehrzeilige Antwort mit den fünf Oktetten beendet "CRLF.CRLF". Bei der Prüfung einer mehrzeiligen Antwort prüft der Client um zu sehen, ob die Zeile mit dem Abschlussoktett beginnt. Wenn ja und wenn andere Oktetts als CRLF folgen, das erste Oktett der Zeile (die Terminierungs-Oktett) wird entfernt. Wenn ja und wenn CRLF sofort folgt das Abschlusszeichen, dann die Antwort aus dem POP Server wird beendet und die Zeile mit ".CRLF" wird nicht berücksichtigt Teil der mehrzeiligen Antwort.
Mit POP3 (Post Office Protocol) holt ein E-Mail-Programm die E-Mails vollständig vom Server. Die Dateien sind danach nicht mehr am Server, sondern nur noch in Ihrem E-Mail-Programm gespeichert.
Mit IMAP (Internet Message Access Protocol) holt ein E-Mail-Programm nur die aktuell benötigten Informationen vom Server. Die Dateien bleiben am Server bestehen.
Vorteile von IMAP:
•	Sie haben auf allen Geräten die gleichen Informationen.
•	Ihre E-Mails gehen nicht verloren, wenn Ihre Festplatte defekt ist.
Nachteile von IMAP:
•	Der Speicherplatz des E-Mail-Postfaches ist schneller voll, wenn Sie keine E-Mails löschen.
•	Sie benötigen immer eine Internetverbindung, wenn Sie Ihre E-Mails lesen wollen.


